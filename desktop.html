<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reeyuki Desktop</title>

    <style>
      :root {
        --taskbar-height: 40px;
        --win7-blue: rgba(0, 120, 215, 0.5);
        --glass: rgba(255, 255, 255, 0.2);
      }

      body {
        margin: 0;
        height: 100vh;
        background: url("/static/wallpapers/wallpaper2.webp") no-repeat center center fixed;
        cursor: url("/icons/cursor.png");
        background-size: cover;
        overflow: hidden;
        font-family: "Segoe UI", Tahoma, sans-serif;
        user-select: none;
        color: #ddd;
      }

      #desktop {
        position: relative;
        width: 100%;
        height: calc(100vh - var(--taskbar-height));
      }

      .icon {
        width: 74px;
        height: 80px;
        text-align: center;
        color: white;
        cursor: pointer;
        position: absolute;
        padding-top: 5px;
        border: 1px solid transparent;
        transition: background 0.2s;
        font-size: 12px;
        text-shadow: 1px 1px 2px black;
      }

      .icon:hover {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 3px;
      }

      .icon.selected {
        background: rgba(0, 120, 215, 0.3);
        border: 1px solid rgba(0, 120, 215, 0.6);
        border-radius: 3px;
      }

      .icon img {
        width: 42px;
        height: 42px;
        display: block;
        margin: 0 auto 5px;
      }

      .window {
        position: absolute;
        color: #ddd;
        border-radius: 6px 6px 0 0;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
        display: flex;
        flex-direction: column;
        z-index: 10;
        border: 1px solid #555;
        overflow: hidden;
        background: #1e1e1e;
      }

      .window-header {
        background: #111;
        padding: 5px 10px;
        cursor: move;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
        font-weight: bold;
        font-size: 13px;
      }

      .window-content {
        flex-grow: 1;
        padding: 5px;
        display: flex;
        flex-direction: column;
      }

      .close-btn {
        background: #e81123;
        color: white;
        border: none;
        padding: 2px 10px;
        cursor: pointer;
        border-radius: 2px;
      }

      .notepad-textarea {
        width: 100%;
        height: 300px;
        border: none;
        resize: none;
        font-family: "Consolas", monospace;
        padding: 5px;
        outline: none;
        background: #2a2a2a;
        color: #ddd;
      }
      .notepad-btn {
        background-color: #3a3a3a;
        color: #ddd;
        border: 1px solid #555;
        padding: 3px 8px;
        cursor: pointer;
        font-family: monospace;
      }

      #taskbar {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: var(--taskbar-height);
        background: linear-gradient(to bottom, rgba(40, 40, 40, 0.8), rgba(0, 0, 0, 0.9));
        display: flex;
        align-items: center;
        z-index: 2000;
        backdrop-filter: blur(5px);
      }

      #start-button {
        width: 50px;
        height: 40px;
        background: url("https://upload.wikimedia.org/wikipedia/commons/7/77/Breezeicons-places-64-start-here-kde.svg")
          no-repeat center;
        background-size: 35px;
        cursor: pointer;
        transition: filter 0.2s;
      }

      #start-button:hover {
        filter: brightness(1.2);
      }

      #start-menu {
        position: absolute;
        bottom: 40px;
        left: 0;
        width: 380px;
        height: 450px;
        background: #1e1e1e;
        border: 1px solid #333;
        display: none;
        flex-direction: row;
        border-radius: 5px 5px 0 0;
        box-shadow: 5px -5px 15px rgba(0, 0, 0, 0.5);
        color: #ddd;
      }

      .start-left {
        width: 60%;
        background: #2a2a2a;
        padding: 10px;
        margin: 5px;
        border-radius: 3px;
      }

      .start-right {
        width: 40%;
        background: linear-gradient(to right, rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.1));
        padding: 10px;
        font-size: 12px;
      }

      .start-item {
        padding: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .start-item:hover {
        background: #3399ff;
        color: white;
      }

      #system-tray {
        margin-left: auto;
        padding-right: 15px;
        font-size: 12px;
        text-align: right;
      }

      .taskbar-button {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        margin: 0 2px;
        padding: 5px 15px;
        font-size: 12px;
        cursor: pointer;
      }

      .explorer-container {
        display: flex;
        height: 400px;
        background: #1e1e1e;
        color: #fff;
        border: 1px solid #333;
        font-family: sans-serif;
      }

      .explorer-sidebar {
        width: 150px;
        background: #2a2a2a;
        border-right: 1px solid #444;
        padding: 10px 0;
      }

      .explorer-main {
        flex-grow: 1;
        display: flex;
        flex-wrap: wrap;
        align-content: flex-start;
        padding: 10px;
        gap: 15px;
        overflow-y: auto;
        background: #1e1e1e;
      }

      .explorer-nav {
        height: 35px;
        background: #2a2a2a;
        border-bottom: 1px solid #444;
        display: flex;
        align-items: center;
        padding: 0 10px;
        gap: 10px;
        font-size: 13px;
        color: #ddd;
      }

      .file-item {
        width: 70px;
        text-align: center;
        cursor: pointer;
        border: 1px solid transparent;
        padding: 5px;
        border-radius: 4px;
        transition:
          background 0.2s,
          border 0.2s;
      }

      .file-item:hover {
        background: #3a3a3a;
        border: 1px solid #555;
      }

      .file-item img {
        width: 40px;
        height: 40px;
        margin-bottom: 5px;
      }

      .file-item span {
        font-size: 11px;
        display: block;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        color: #ddd;
      }

      .back-btn {
        cursor: pointer;
        padding: 2px 8px;
        border: 1px solid #555;
        background: #2a2a2a;
        border-radius: 3px;
        color: #ddd;
        transition:
          background 0.2s,
          border 0.2s;
      }

      .back-btn:hover {
        background: #3a3a3a;
        border-color: #777;
      }

      #context-menu {
        position: absolute;
        background: #2a2a2a;
        border: 1px solid #555;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
        display: none;
        z-index: 3000;
        min-width: 150px;
        font-size: 12px;
        color: #ddd;
      }

      #context-menu div {
        padding: 8px 15px;
        cursor: pointer;
      }

      #context-menu div:hover {
        background: #3399ff;
        color: white;
      }

      #context-menu hr {
        margin: 3px 0;
        border: none;
        border-top: 1px solid #555;
      }

      #selection-box {
        border: 1px solid #0078d7;
        background-color: rgba(0, 120, 215, 0.3);
        position: absolute;
        pointer-events: none;
        display: none;
        z-index: 1000;
      }

      .window-controls {
        display: flex;
        gap: 5px;
      }

      .minimize-btn,
      .maximize-btn,
      .close-btn {
        padding: 2px 8px;
        cursor: pointer;
        border: none;
        background: #444;
        color: white;
        border-radius: 3px;
      }

      .minimize-btn:hover {
        background: #555;
      }

      .maximize-btn:hover {
        background: #555;
      }

      .close-btn:hover {
        background: #c42b1c;
      }

      .kde-menu {
        position: absolute;
        bottom: 45px;
        left: 5px;
        width: 520px;
        height: 380px;
        display: flex;
        background: rgba(30, 30, 30, 0.98);
        color: #eee;
        border-radius: 8px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
        font-family: system-ui;
        z-index: 10001;
      }

      .kde-sidebar {
        width: 160px;
        background: rgba(20, 20, 20, 0.95);
        border-right: 1px solid #333;
        display: flex;
        flex-direction: column;
      }

      .kde-user {
        padding: 14px;
        display: flex;
        align-items: center;
        gap: 10px;
        border-bottom: 1px solid #333;
      }

      .kde-user img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
      }

      .kde-cat {
        padding: 10px 14px;
        cursor: pointer;
        font-size: 14px;
      }

      .kde-cat:hover,
      .kde-cat.active {
        background: #3daee9;
        color: black;
      }

      .kde-content {
        flex: 1;
        padding: 12px;
        display: flex;
        flex-direction: column;
      }

      #kde-search {
        padding: 8px;
        margin-bottom: 10px;
        border-radius: 6px;
        border: none;
        background: #222;
        color: white;
      }

      .kde-page {
        display: none;
        flex-wrap: wrap;
        gap: 6px;
      }

      .kde-page.active {
        display: flex;
      }

      .kde-item {
        width: calc(50% - 6px);
        padding: 8px;
        background: #222;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
      }

      .kde-item:hover {
        background: #3daee9;
        color: black;
      }
    </style>
  </head>

  <body>
    <div id="selection-box"></div>

    <div id="desktop">
      <div class="icon selectable" data-app="explorer">
        <img src="https://cdn-icons-png.flaticon.com/512/716/716784.png" />
        <div>Computer</div>
      </div>

      <div class="icon selectable" data-app="notepad">
        <img src="https://cdn-icons-png.flaticon.com/512/32/32329.png" />
        <div>Notepad</div>
      </div>

      <div class="icon selectable" data-app="terminal">
        <svg class="icon-img" width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M13 16H18" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M6 8L10 12L6 16" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          <path
            d="M2 18V6C2 4.89543 2.89543 4 4 4H20C21.1046 4 22 4.89543 22 6V18C22 19.1046 21.1046 20 20 20H4C2.89543 20 2 19.1046 2 18Z"
            stroke="#000"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        <div>Terminal</div>
      </div>

      <div class="icon selectable" data-app="music">
        <img src="/icons/music.png" />
        <div>Music Player</div>
      </div>

      <div class="icon selectable" data-app="pacman">
        <img src="/icons/pac-man.webp" />
        <div>Pac-Man</div>
      </div>

      <div class="icon selectable" data-app="pvz">
        <img src="/icons/pvz.webp" />
        <div>Plants vs. Zombies</div>
      </div>

      <div class="icon selectable" data-app="tetris">
        <img src="/icons/tetris.webp" />
        <div>Tetris</div>
      </div>

      <div class="icon selectable" data-app="roads">
        <img src="/icons/roads.svg" />
        <div>Roads</div>
      </div>

      <div class="icon selectable" data-app="starcraft">
        <img src="/icons/starcraft.png" />
        <div>Starcraft</div>
      </div>

      <div class="icon selectable" data-app="isaac">
        <img src="/icons/isaac.ico" />
        <div>Isaac</div>
      </div>

      <div class="icon selectable" data-app="mario">
        <img src="/icons/mario.webp" />
        <div>Mario</div>
      </div>

      <div class="icon selectable" data-app="sonic">
        <img src="/icons/sonic.png" />
        <div>Sonic</div>
      </div>

      <div class="icon selectable" data-app="papaGames">
        <img src="/icons/papa.webp" />
        <div>Papa Games</div>
      </div>

      <div class="icon selectable" data-app="zombieTd">
        <img src="/icons/zombietd.jpg" />
        <div>Zombie TD</div>
      </div>

      <div class="icon selectable" data-app="zombotron">
        <img src="/icons/zombotron.webp" />
        <div>Zombotron</div>
      </div>

      <div class="icon selectable" data-app="zombotron2">
        <img src="/icons/zombotron.webp" />
        <div>Zombotron 2</div>
      </div>

      <div class="icon selectable" data-app="swarmQueen">
        <img src="/icons/swarm.webp" />
        <div>Swarm Queen</div>
      </div>

      <div class="icon selectable" data-app="fancyPants">
        <img
          src="https://play-lh.googleusercontent.com/uUknF-T1uzoMBLoR7CJo2R6GT_2RYs9qxXSvzCxsxZ-i7KD43k3RsdCyw7xXESIkOUg"
        />
        <div>Fancy Pants</div>
      </div>

      <div class="icon selectable" data-app="fancyPants2">
        <img
          src="https://play-lh.googleusercontent.com/uUknF-T1uzoMBLoR7CJo2R6GT_2RYs9qxXSvzCxsxZ-i7KD43k3RsdCyw7xXESIkOUg"
        />
        <div>Fancy Pants 2</div>
      </div>

      <div class="icon selectable" data-app="vscode">
        <img src="/icons/code.ico" />
        <div>Visual Studio Code</div>
      </div>

      <div class="icon selectable" data-app="minecraft">
        <img src="/icons/minecraft.webp" alt="Minecraft" />
        <div>
          <a href="https://eaglercraft.com/play/?version=" target="_blank">Minecraft</a>
        </div>
      </div>
    </div>

    <div id="start-menu" class="kde-menu">
      <div class="kde-sidebar">
        <div class="kde-user">
          <img src="/icons/guest.webp" />
          <span>reeyuki</span>
        </div>

        <div class="kde-cat active" data-cat="favorites">‚≠ê Favorites</div>
        <div class="kde-cat" data-cat="apps">üì¶ Applications</div>
        <div class="kde-cat" data-cat="games">üéÆ Games</div>
        <div class="kde-cat" data-cat="system">‚öô System</div>
      </div>

      <div class="kde-content">
        <input id="kde-search" placeholder="Search‚Ä¶" autocomplete="off" />

        <div class="kde-page active" data-page="favorites">
          <div class="kde-item" data-app="notepad">üìù Notepad</div>
          <div class="kde-item" data-app="explorer">üìÅ File Manager</div>
          <div class="kde-item" data-app="music">üéµ Music Player</div>
        </div>

        <div class="kde-page" data-page="apps">
          <div class="kde-item" data-app="notepad">üìù Notepad</div>
          <div class="kde-item" data-app="vscode">Visual Studio Code</div>
          <div class="kde-item" data-app="explorer">üìÅ File Manager</div>
        </div>

        <div class="kde-page" data-page="games">
          <div class="kde-item" data-app="pacman">üëæ Pac-Man</div>
          <div class="kde-item" data-app="pvz">üåª Plants vs Zombies</div>
          <div class="kde-item" data-app="sonic">üåÄ Sonic</div>
          <div class="kde-item" data-app="starcraft">üöÄ StarCraft</div>
        </div>

        <div class="kde-page" data-page="system">
          <div class="kde-item" data-app="settings">‚öô Settings</div>
          <div class="kde-item" data-app="return">‚èª Logout</div>
        </div>
      </div>
    </div>

    <div id="taskbar">
      <div id="start-button"></div>
      <div id="taskbar-windows" style="display: flex"></div>
      <div id="system-tray">
        <div id="clock">12:00 PM</div>
        <div id="date">12/18/2025</div>
      </div>
    </div>

    <div id="context-menu"></div>
  </body>

  <script src="/js/desktop.js"></script>
  <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
  <script>
    const icons = desktop.querySelectorAll(".icon");

    const ICON_WIDTH = 80;
    const ICON_HEIGHT = 100;
    const GAP = 5;
    const COLUMNS = 5;

    icons.forEach((icon, index) => {
      const col = index % COLUMNS;
      const row = Math.floor(index / COLUMNS);
      icon.style.position = "absolute";
      icon.style.top = `${GAP + row * (ICON_HEIGHT + GAP)}px`;
      icon.style.left = `${GAP + col * (ICON_WIDTH + GAP)}px`;
    });

    document.querySelectorAll(".kde-cat").forEach((cat) => {
      cat.onclick = () => {
        document.querySelectorAll(".kde-cat").forEach((c) => c.classList.remove("active"));
        document.querySelectorAll(".kde-page").forEach((p) => p.classList.remove("active"));

        cat.classList.add("active");
        document.querySelector(`.kde-page[data-page="${cat.dataset.cat}"]`).classList.add("active");
      };
    });

    document.getElementById("kde-search").addEventListener("input", (e) => {
      const q = e.target.value.toLowerCase();
      document.querySelectorAll(".kde-item").forEach((item) => {
        item.style.display = item.textContent.toLowerCase().includes(q) ? "" : "none";
      });
    });
  </script>
</html>
